<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Login</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  *{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Poppins',sans-serif;
}

body{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
}

/* ===== CONTAINER ===== */
.login-wrapper{
  width:100%;
  max-width:1000px;
  min-height:520px;
  background:#1d1b3a;
  border-radius:24px;
  display:flex;
  overflow:hidden;
  box-shadow:0 40px 120px rgba(0,0,0,.6);
}

/* ===== LEFT PANEL ===== */
.login-left{
  width:100%;
  padding:50px 80px;
  display:flex;
  flex-direction:column;
  justify-content:center;
}

.login-left h2{
  color:#fff;
  font-size:28px;
  margin-bottom:30px;
  text-align: center;
}

/* Inputs */
.input-box{
  margin-bottom:18px;
}

.input-box input{
  width:100%;
  padding:14px 18px;
  border-radius:30px;
  border:none;
  outline:none;
  background:#26245c;
  color:#fff;
  font-size:15px;
  text-align: ;
}

.input-box input::placeholder{
  color:rgba(255,255,255,.6);
}

.input-box input:focus{
  outline:2px solid rgba(255,255,255,.25);
}

/* Button */
.login-btn{
  margin-top:10px;
  padding:14px;
  border:none;
  border-radius:30px;
  background:linear-gradient(90deg,#ff2fdc,#6a5cff);
  color:#fff;
  font-weight:600;
  cursor:pointer;
  font-size:15px;
  transition:.25s ease;
}

.login-btn:hover{
  transform:translateY(-1px);
  box-shadow:0 10px 25px rgba(255,47,220,.35);
}

.error{
  margin-top:15px;
  color:#ff6b6b;
  font-size:14px;
  display:none;
}

/* ===== RIGHT PANEL ===== */
.login-right{
  width:100%;
  padding:60px;
  display:flex;
  justify-content:center;
  color:#fff;
}

.login-right h1{
  font-size:42px;
  margin-bottom:20px;
}

.login-right p{
  max-width:420px;
  line-height:1.7;
  font-size:15px;
}

/* ===== TABLET ===== */
@media (max-width: 900px){
  .login-wrapper{
    flex-direction:column;
    max-width:100%;
  }

  .login-left,
  .login-right{
    width:100%;
  }

 
}

/* ===== MOBILE ===== */
@media (max-width: 520px){
  body{
    padding:12px;
  }

  .login-wrapper{
    border-radius:18px;
  }

  .login-left{
    padding:96px 26px;
  }

  .login-left h2{
    font-size:24px;
  }

 
}

</style>
</head>

<body>

<div class="login-wrapper">

  <!-- LEFT -->
  <div class="login-left">
    <h2>Admin Login</h2>

    <div class="input-box">
      <input id="username" placeholder="Username">
    </div>

    <div class="input-box">
      <input id="password" type="password" placeholder="Password">
    </div>

    <button class="login-btn" onclick="login()">LOGIN</button>

    <div class="error" id="error">Invalid credentials</div>
  </div>

 

</div>

<script type="module">
import { auth, db } from "./firebase.js";
import {
  signInWithEmailAndPassword
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import {
  doc, getDoc
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

window.login = async function () {
  const email = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();
  const error = document.getElementById("error");

  error.style.display = "none";

  try {
    // 1️⃣ Firebase Auth
    const cred = await signInWithEmailAndPassword(auth, email, password);

    // 2️⃣ Check admin role
    const adminRef = doc(db, "admins", email);
    const adminSnap = await getDoc(adminRef);

    if (!adminSnap.exists()) {
      throw new Error("Not an admin");
    }

    if (!adminSnap.data().active) {
      throw new Error("Admin inactive");
    }

    // 3️⃣ Success
    window.location.href = "admin.html";

  } catch (err) {
    console.error(err);
    error.style.display = "block";
    error.textContent = "Invalid credentials";
  }
};
</script>

</body>
</html>
